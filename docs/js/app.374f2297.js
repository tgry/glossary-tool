(function(o){function t(t){for(var r,i,n=t[0],l=t[1],c=t[2],u=0,f=[];u<n.length;u++)i=n[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&f.push(s[i][0]),s[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(o[r]=l[r]);d&&d(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),e()}function e(){for(var o,t=0;t<a.length;t++){for(var e=a[t],r=!0,n=1;n<e.length;n++){var l=e[n];0!==s[l]&&(r=!1)}r&&(a.splice(t--,1),o=i(i.s=e[0]))}return o}var r={},s={app:0},a=[];function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return o[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=o,i.c=r,i.d=function(o,t,e){i.o(o,t)||Object.defineProperty(o,t,{enumerable:!0,get:e})},i.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,t){if(1&t&&(o=i(o)),8&t)return o;if(4&t&&"object"===typeof o&&o&&o.__esModule)return o;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:o}),2&t&&"string"!=typeof o)for(var r in o)i.d(e,r,function(t){return o[t]}.bind(null,r));return e},i.n=function(o){var t=o&&o.__esModule?function(){return o["default"]}:function(){return o};return i.d(t,"a",t),t},i.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)},i.p="/glossary-tool/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var d=l;a.push([0,"chunk-vendors"]),e()})({0:function(o,t,e){o.exports=e("56d7")},"034f":function(o,t,e){"use strict";var r=e("85ec"),s=e.n(r);s.a},1:function(o,t){},10:function(o,t){},11:function(o,t){},12:function(o,t){},13:function(o,t){},14:function(o,t){},15:function(o,t){},16:function(o,t){},"19ad":function(o,t,e){},2:function(o,t){},3:function(o,t){},4:function(o,t){},5:function(o,t){},"56d7":function(o,t,e){"use strict";e.r(t);e("e260"),e("e6cf"),e("cca6"),e("a79d");var r=e("2b0e"),s=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{attrs:{id:"app"}},[e("GlossaryTool")],1)},a=[],i=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("b-container",{staticClass:"app-area",attrs:{fluid:""}},[e("b-row",{staticClass:"app-area"},[e("b-col",{attrs:{id:"list-area"}},[e("h1",[o._v("Glossary-Tool")]),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal.app-config-dialog",modifiers:{"app-config-dialog":!0}}],attrs:{id:"app-config-button",variant:"outline-light",title:"全体設定"}},[e("b-icon-gear",{attrs:{"font-scale":"2"}})],1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal.add-glossary-dialog",modifiers:{"add-glossary-dialog":!0}}],attrs:{id:"add-glossary-button",variant:"outline-light",title:"用語集を作成"}},[e("b-icon-plus",{attrs:{"font-scale":"2"}})],1),0==o.glossary_list.length?e("p",{attrs:{id:"list-empty"}},[o._v(" 作成済みの用語集がありません"),e("br"),e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add-glossary-dialog",modifiers:{"add-glossary-dialog":!0}}]},[o._v("作成")]),e("b-button",{on:{click:o.clickImportButton}},[o._v("インポート")])],1):o._e(),0!=o.glossary_list.length?e("p",{attrs:{id:"glossary-list"}},o._l(o.glossary_list,(function(t){return e("glossary-list-item",{key:t.path,attrs:{glossary:t},on:{"remove-glossary":o.removeGlossary,"select-glossary":o.selectGlossary}})})),1):o._e()],1),e("b-col",{attrs:{id:"glossary-area",cols:"9"}},[e("glossary-view",{ref:"glossary_view",on:{"remove-glossary":o.removeGlossary,"update-glossary":o.updateGlossary}})],1)],1)],1),e("b-modal",{attrs:{id:"app-config-dialog",title:"全体設定"}},[e("b-button",{attrs:{title:"ファイルからインポートします(既存データは削除されます)"},on:{click:o.clickImportButton}},[o._v("インポート")]),e("b-button",{attrs:{title:"すべての用語集をファイルへ保存します"},on:{click:o.exportAppFile}},[o._v("エクスポート")]),e("div",{attrs:{id:"file-select"}},[e("input",{ref:"app_import_file",attrs:{type:"file"}}),e("a",{ref:"export_link",attrs:{href:"#",download:"appdata.js"}},[o._v("export")])])],1),e("b-modal",{attrs:{id:"add-glossary-dialog",title:"用語集の追加"},on:{show:o.resetGlossaryNameDialogModal,hidden:o.resetGlossaryNameDialogModal,ok:o.handleGlossaryNameDialogModalOk}},[e("form",{ref:"add_glossary_form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),o.handleGlossaryAdd(t)}}},[e("b-form-group",{attrs:{state:o.add_glossary_form_state,label:"用語集の名前","label-for":"add-glossary-form-input","invalid-feedback":"名前の入力がないか、/が先頭にあります"}},[e("b-form-input",{attrs:{id:"add-glossary-form-input",state:o.add_glossary_form_state,required:"",placeholder:"/区切り"},model:{value:o.glossary_name_dialog,callback:function(t){o.glossary_name_dialog=t},expression:"glossary_name_dialog"}})],1)],1)])],1)},n=[],l=(e("4160"),e("b0c0"),e("ac1f"),e("1276"),e("2ca0"),e("159b"),function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{staticClass:"list-item"},["folder"==o.glossary.doc_type?e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"child-collapse-"+o.glossary.path,expression:"'child-collapse-' + glossary.path"}],staticClass:"item-button",attrs:{variant:"secondary"}},[e("b-icon-folder",{staticClass:"type-icon"}),o._v(" "+o._s(o.glossary.name)+" ")],1):o._e(),"glossary"==o.glossary.doc_type?e("b-button",{staticClass:"item-button",attrs:{variant:"primary"},on:{click:o.selectGlossary}},[e("b-icon-book",{staticClass:"type-icon"}),o._v(" "+o._s(o.glossary.name)+" ")],1):o._e(),"glossary"==o.glossary.doc_type?e("b-button",{staticClass:"glossary-remove-button",attrs:{variant:"primary"},on:{click:o.removeGlossary}},[e("b-icon-trash")],1):o._e(),"folder"==o.glossary.doc_type?e("b-collapse",{staticClass:"mt-2",attrs:{id:"child-collapse-"+o.glossary.path,visible:""}},o._l(o.glossary.child,(function(t){return e("glossary-list-item",{key:t.path,attrs:{glossary:t},on:{"remove-glossary":o.sendRemoveGlossary,"select-glossary":o.sendSelectGlossary}})})),1):o._e()],1)}),c=[],d={name:"GlossaryListItem",props:{glossary:Object},methods:{removeGlossary:function(){var o=this;this.$bvModal.msgBoxConfirm(this.glossary.path+"を削除します。よろしいですか？").then((function(t){t&&o.$emit("remove-glossary",o.glossary.doc)}))},sendRemoveGlossary:function(o){this.$emit("remove-glossary",o)},sendSelectGlossary:function(o){this.$emit("select-glossary",o)},selectGlossary:function(){this.$emit("select-glossary",this.glossary.doc)}}},u=d,f=(e("75a3"),e("2877")),p=Object(f["a"])(u,l,c,!1,null,"a04e6556",null),g=p.exports,_=function(){var o=this,t=o.$createElement,e=o._self._c||t;return o.glossary?e("div",{attrs:{id:"glossary-view"}},[e("h2",[o._v(o._s(o.glossary._id))]),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal.glossary-config-dialog",modifiers:{"glossary-config-dialog":!0}}],attrs:{id:"glossary-config-button",variant:"outline-dark",title:"個別設定"}},[e("b-icon-gear",{attrs:{"font-scale":"2"}})],1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{id:"add-word-button",variant:"outline-dark",title:"単語を作成"},on:{click:o.clickAddWordButton}},[e("b-icon-plus",{attrs:{"font-scale":"2"}})],1),e("div",[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.convert-words",modifiers:{"convert-words":!0}}],attrs:{block:"",variant:"primary"}},[o._v("一括変換")])],1),e("b-collapse",{attrs:{id:"convert-words",visible:""}},[e("b-container",{staticClass:"convert-container",attrs:{fluid:""}},[e("b-row",[e("b-col",[e("b-form-textarea",{ref:"name_textarea",on:{change:o.changeNameTextArea},model:{value:o.name_convert,callback:function(t){o.name_convert=t},expression:"name_convert"}})],1),e("b-col",{staticClass:"convert-arrow-col"},[e("b-icon-arrow-bar-right",{attrs:{"font-scale":"3"}})],1),e("b-col",[e("b-form-textarea",{ref:"value_textarea",model:{value:o.value_convert,callback:function(t){o.value_convert=t},expression:"value_convert"}})],1)],1)],1)],1),e("div",[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.word-list",modifiers:{"word-list":!0}}],attrs:{block:"",variant:"primary"}},[o._v("一覧")])],1),e("b-collapse",{attrs:{id:"word-list",visible:""}},[e("b-container",[e("b-row",{staticClass:"word-list-header"},[e("b-col",[o._v("単語")]),e("b-col",[o._v("値")]),e("b-col",[o._v("説明")]),e("b-col",[o._v("編集")]),e("b-col",[o._v("削除")])],1),o._l(o.glossary.words,(function(t){return e("b-row",{key:t.name},[e("b-col",[o._v(o._s(t.name))]),e("b-col",[o._v(o._s(t.value))]),e("b-col",[o._v(o._s(t.description))]),e("b-col",[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"編集"},on:{click:function(e){return o.clickEditWordButton(t)}}},[e("b-icon-pen",{attrs:{"font-scale":"1"}})],1)],1),e("b-col",[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"削除"},on:{click:function(e){return o.clickRemoveWordButton(t)}}},[e("b-icon-trash",{attrs:{"font-scale":"1"}})],1)],1)],1)}))],2)],1),e("b-modal",{attrs:{id:"glossary-config-dialog",title:"個別設定"}},[e("b-button",{attrs:{title:"ファイルからインポートします(既存データは削除されます)"},on:{click:o.clickImportGlossaryButton}},[o._v("インポート")]),e("b-button",{attrs:{title:"表示されている用語集をファイルへ保存します"},on:{click:o.exportGlossaryFile}},[o._v("エクスポート")]),e("div",{attrs:{id:"glossary-file-select"}},[e("input",{ref:"glossary_import_file",attrs:{type:"file"}}),e("a",{ref:"glossary_export_link",attrs:{href:"#",download:"glossarydata.js"}},[o._v("export")])])],1),e("b-modal",{attrs:{id:"edit-word-dialog"},on:{ok:o.handleWordEditDialogModalOk}},[e("form",{ref:"edit_word_form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),o.handleWordEdit(t)}}},[e("b-form-group",{attrs:{label:"単語","label-for":"edit-name-form-input"}},[e("b-form-input",{attrs:{id:"edit-name-form-input",required:"",placeholder:"単語"},model:{value:o.edit_word_dialog_name,callback:function(t){o.edit_word_dialog_name=t},expression:"edit_word_dialog_name"}})],1),e("b-form-group",{attrs:{label:"値","label-for":"edit-value-form-input"}},[e("b-form-input",{attrs:{id:"edit-value-form-input",required:"",placeholder:"値"},model:{value:o.edit_word_dialog_value,callback:function(t){o.edit_word_dialog_value=t},expression:"edit_word_dialog_value"}})],1),e("b-form-group",{attrs:{label:"説明","label-for":"edit-description-form-input"}},[e("b-form-input",{attrs:{id:"edit-description-form-input",placeholder:"説明"},model:{value:o.edit_word_dialog_description,callback:function(t){o.edit_word_dialog_description=t},expression:"edit_word_dialog_description"}})],1)],1)])],1):o._e()},h=[],v=(e("a4d3"),e("e01a"),e("4de4"),e("a15b"),{name:"GlossaryView",data:function(){return{glossary:null,edit_word_dialog_name:"",edit_word_dialog_value:"",edit_word_dialog_description:"",current_word:null,name_convert:"",value_convert:""}},methods:{setGlossary:function(o){this.glossary=o?{_id:o._id,words:o.words}:null,this.name_convert="",this.value_convert=""},clickImportGlossaryButton:function(){},exportGlossaryFile:function(){},handleWordEdit:function(){this.current_word?(this.current_word.name=this.edit_word_dialog_name,this.current_word.value=this.edit_word_dialog_value,this.current_word.description=this.edit_word_dialog_description):this.glossary.words.push({name:this.edit_word_dialog_name,value:this.edit_word_dialog_value,description:this.edit_word_dialog_description}),this.$bvModal.hide("edit-word-dialog"),this.$emit("update-glossary",this.glossary)},handleWordEditDialogModalOk:function(o){o.preventDefault(),this.handleWordEdit()},clickAddWordButton:function(){this.current_word=null,this.edit_word_dialog_name="",this.edit_word_dialog_value="",this.edit_word_dialog_description="",this.$bvModal.show("edit-word-dialog")},clickEditWordButton:function(o){this.current_word=o,this.edit_word_dialog_name=o.name,this.edit_word_dialog_value=o.value,this.edit_word_dialog_description=o.description,this.$bvModal.show("edit-word-dialog")},clickRemoveWordButton:function(o){var t=this.glossary.words.filter((function(t){return t.name!=o.name}));this.glossary.words=t,this.$emit("update-glossary",this.glossary)},changeNameTextArea:function(){var o=this.name_convert.split("\n"),t=[],e=this;o.forEach((function(o){var r=null;e.glossary.words.forEach((function(t){r||o!=t.name||(r=t.value)})),t.push(r||"")})),this.value_convert=t.join("\n")}}}),m=v,y=(e("624a"),Object(f["a"])(m,_,h,!1,null,"29f8eaf9",null)),b=y.exports,w={name:"GlossaryTool",props:{msg:String},data:function(){return{current_glossary:null,glossary_list:[],config:null,config_dialog:{},glossary_name_dialog:"",add_glossary_form_state:null,import_file:null}},components:{"glossary-list-item":g,"glossary-view":b},created:function(){localStorage.glossary_tool_config=localStorage.glossary_tool_config||'{"user":"admin", "password":"password", "couch_url":"http://localhost:5984/glossary-tool"}',this.config=JSON.parse(localStorage.glossary_tool_config),this.initPouch(this.config.couch_url)},pouch:{pouch_glossary:{}},methods:{initPouch:function(o){var t=this;this.$pouch.connect(this.config.user,this.config.password,o).then((function(e){return 0===e.status?(console.log("オフライン"),void t.reloadGlossaryList()):"unauthorized"===e.error?(console.log("認証失敗"),void t.reloadGlossaryList()):(t.$pouch.sync("pouch_glossary",o),void t.reloadGlossaryList())})).catch((function(o){console.error(o)}))},disconnectPouch:function(o){this.$pouch.disconnect(o)},recoonectPouch:function(o,t){this.disconnectPouch(o),this.initPouch(t)},handleGlossaryAdd:function(){var o=this.$refs.add_glossary_form.checkValidity();o?this.glossary_name_dialog.startsWith("/")?this.add_glossary_form_state=!1:(this.addGlossary(this.glossary_name_dialog),this.$nextTick((function(){this.$bvModal.hide("add-glossary-dialog")}))):this.add_glossary_form_state=o},resetGlossaryNameDialogModal:function(){this.glossary_name_dialog="",this.add_glossary_form_state=null},handleGlossaryNameDialogModalOk:function(o){o.preventDefault(),this.handleGlossaryAdd()},addGlossary:function(o){var t=this;this.$pouch.put({_id:o,words:[]},{},"pouch_glossary").then((function(){console.log("追加:"+o),t.reloadGlossaryList()}))},reloadGlossaryList:function(){var o=this;this.$pouch.allDocs({include_docs:!0},"pouch_glossary").then((function(t){var e=[],r={};t.rows.forEach((function(o){var t=o.id.split("/"),s="";t.forEach((function(t){var a=0==s.length?t:s+"/"+t,i=null;if(o.id==a)i={doc_type:"glossary",name:t,doc:o.doc,path:a};else{if(r[a])return void(s=a);i={doc_type:"folder",name:t,child:[],path:a}}s?(r[s].child.push(i),r[s].child.sort((function(o,t){return o.doc_type!=t.doc_type?"folder"==o.doc_type?-1:1:o.name<t.name?-1:0}))):(e.push(i),e.sort((function(o,t){return o.doc_type!=t.doc_type?"folder"==o.doc_type?-1:1:o.name<t.name?-1:0}))),r[a]=i,s=a}))})),o.glossary_list=e})).catch((function(o){console.log(o)}))},removeGlossary:function(o){var t=this;console.log("削除："+o._id),o._id==this.current_glossary&&(this.current_glossary=null,this.$refs.glossary_view.setGlossary(null)),this.$pouch.remove(o,{},"pouch_glossary").then((function(){t.reloadGlossaryList()}))},selectGlossary:function(o){console.log("選択："+o._id),this.$refs.glossary_view.setGlossary(o),this.current_glossary=o._id},exportAppFile:function(){var o=this;this.$pouch.allDocs({include_docs:!0},"pouch_glossary").then((function(t){var e=[];t.rows.forEach((function(o){e.push({_id:o.doc._id,words:o.doc.words})}));var r=new FileReader;r.onload=function(){o.$refs.export_link.href="data:text/plain;charset=UTF-8;base64,"+r.result.split(",")[1],o.$refs.export_link.click()},r.readAsDataURL(new Blob([JSON.stringify(e)]))}))},importAppFile:function(){var o=this.$refs.app_import_file.files[0],t=new FileReader,e=this;t.onload=function(){var o=JSON.parse(t.result);e.$pouch.allDocs({include_docs:!0},"pouch_glossary").then((function(t){var r=[];t.rows.forEach((function(o){var t=o.doc;t._deleted=!0,r.push(t)})),0==r.length?e.$pouch.bulkDocs(o,{},"pouch_glossary").then((function(){e.reloadGlossaryList()})):e.$pouch.bulkDocs(r,{},"pouch_glossary").then((function(){e.$pouch.bulkDocs(o,{},"pouch_glossary").then((function(){e.reloadGlossaryList()}))}))})),e.$bvModal.hide("app-config-dialog")},t.readAsText(o,"utf-8")},clickImportButton:function(){var o=this;this.$refs.app_import_file.onchange=function(){o.importAppFile()},this.$refs.app_import_file.click()},updateGlossary:function(o){var t=this;this.$pouch.get(o._id,{},"pouch_glossary").then((function(e){t.$pouch.put({_id:o._id,_rev:e._rev,words:o.words},{},"pouch_glossary").then((function(){console.log("更新: "+o._id)}))})).catch((function(o){console.log(o)}))}}},k=w,G=(e("74d8"),Object(f["a"])(k,i,n,!1,null,"7446f75e",null)),$=G.exports,x=e("5f5b"),N=e("b1e0"),O=(e("f9e3"),e("2dd8"),e("d6e1")),D=e("5d16"),j=e("4833"),E=e.n(j),A=e("fcd3"),M=e("1629"),B=e.n(M);r["default"].use(x["a"]),r["default"].use(N["a"]),O["a"].plugin(D["a"]),O["a"].plugin(E.a),O["a"].plugin(A["a"]),r["default"].use(B.a,{pouch:O["a"],defaultDB:"http://localhost:5984/glossary-tool",optionsDB:{fetch:function(o,t){return t.credentials="include",O["a"].fetch(o,t)}}});var P={name:"App",components:{GlossaryTool:$}},S=P,C=(e("034f"),Object(f["a"])(S,s,a,!1,null,null,null)),T=C.exports,W=e("9483");Object(W["a"])("".concat("/glossary-tool/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(o){console.error("Error during service worker registration:",o)}}),r["default"].config.productionTip=!1,new r["default"]({render:function(o){return o(T)}}).$mount("#app")},6:function(o,t){},"624a":function(o,t,e){"use strict";var r=e("b6d8"),s=e.n(r);s.a},"66f6":function(o,t,e){},7:function(o,t){},"74d8":function(o,t,e){"use strict";var r=e("66f6"),s=e.n(r);s.a},"75a3":function(o,t,e){"use strict";var r=e("19ad"),s=e.n(r);s.a},8:function(o,t){},"85ec":function(o,t,e){},9:function(o,t){},b6d8:function(o,t,e){}});
//# sourceMappingURL=app.374f2297.js.map